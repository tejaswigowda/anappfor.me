/*! jQuery Scrollz - v1.0.5 - 2013-09-12
* https://github.com/zippy1978/jquery.scrollz
* Copyright (c) 2013 Gilles Grousset; Licensed MIT, GPL */ 
!function(a){function b(){return"ontouchstart"in document.documentElement}function c(a){f(a,"contentWrapper");var b=f(a,"pullHeader");return b?b.outerHeight(!0):0}function d(a,c){var d=a.data("options");if(!b()&&d.emulateTouchEvents)switch(c){case"touchstart":return"mousedown";case"touchend":return"mouseup";case"touchmove":return"mousemove"}return c}function e(a,b,c){var d=a.data("markup");d||(d={},a.data("markup",d)),d[b]=c}function f(a,b){var c=a.data("markup");return c?c[b]:null}function g(a,b,c){var d=a.data("tracking");d||(d={},a.data("tracking",d)),d[b]=c}function h(a,b){var c=a.data("tracking");return c?c[b]:null}function i(a){g(a,"startTouchTime",null),g(a,"startTouchY",null),g(a,"previousTouchTime",null),g(a,"previousTouchY",null),g(a,"lastTouchTime",null),g(a,"lastTouchY",null)}function j(a){a.attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none","-ms-user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})}function k(a,b){var d=a.data("options"),e=c(a);return d.pull&&e>b?e:b}function l(b){var d=b.data("options"),f=b.height(),g=a('<div class="scrollz-content-wrapper"/>'),h=a('<div class="scrollz-container"/>');h.css("height",f),h.css("overflow-x","hidden"),h.css("overflow-y","hidden"),d.styleClass&&h.addClass(d.styleClass),b.wrap(h).wrap(g),b.css("overflow-y","visible"),g=b.parent(),h=g.parent();var i=a('<div class="scrollz-thumb"></div>');if(i.css("position","absolute"),h.prepend(i),i=h.find(".scrollz-thumb"),i.hide(),b.css("height","auto"),b.css("min-height",f),e(b,"contentWrapper",g),e(b,"container",h),e(b,"scrollThumb",i),d.pull){var k=a(d.pullHeaderHTML.initial);k.addClass("scrollz-pull-header").addClass("initial"),g.prepend(k),e(b,"pullHeader",g.children(".scrollz-pull-header"));var l=c(b);l>f&&(h.css("height",l),b.css("min-height",l)),h.scrollTop(l),j(h)}}function m(b,c){var d=b.data("options"),g=f(b,"contentWrapper"),h=g.children(".scrollz-pull-header");h.hasClass(c)||h.replaceWith(a(d.pullHeaderHTML[c]).addClass("scrollz-pull-header").addClass(c)),e(b,"pullHeader",g.children(".scrollz-pull-header")),b.data("pullHeaderState",c)}function n(a){var b=a.data("pullHeaderState");return b||(b="initial"),b}function o(a){var b=a.data("options"),d=f(a,"container"),e=c(a);b.pull&&d.scrollTop()<e&&"waiting"!==n(a)&&(d.scrollTop()<e/2?(m(a,"waiting"),a.trigger("pulled")):d.animate({scrollTop:e},"fast"))}function p(a){var b=a.data("options"),c=f(a,"container"),d=h(a,"previousTouchY"),e=h(a,"lastTouchY"),g=h(a,"previousTouchTime"),i=new Date-g,j=d-e,l=Math.abs(j/i);if(b.inertia){var m=750*Math.pow(l,2);0>j&&(m*=-1),c.stop(!0,!0),0!==m&&c.animate({scrollTop:k(a,c.scrollTop()+m)},{duration:750*l,easing:"easeOutCubic"})}}function q(a,c){if("waiting"!==n(c)){c.data("options");var d=f(c,"container");d.stop(),b()?g(c,"startTouchY",a.originalEvent.targetTouches[0].screenY):g(c,"startTouchY",a.screenY),g(c,"startTouchTime",new Date),g(c,"previousTouchY",h(c,"startTouchY")),g(c,"previousTouchTime",h(c,"startTouchTime")),g(c,"lastTouchY",h(c,"startTouchY")),g(c,"lastTouchTime",h(c,"startTouchTime")),g(c,"initialScrollPosition",d.scrollTop())}}function r(a,c){var d=f(c,"container"),e=h(c,"startTouchY"),i=h(c,"lastTouchY"),j=h(c,"lastTouchTime"),k=h(c,"initialScrollPosition");if(e){g(c,"previousTouchY",i),g(c,"previousTouchTime",j);var l=0;b()?(l=e-a.originalEvent.changedTouches[0].screenY+k,g(c,"lastTouchY",a.originalEvent.targetTouches[0].screenY)):(l=e-a.screenY+k,g(c,"lastTouchY",a.screenY)),g(c,"lastTouchTime",new Date),d.scrollTop(l)}}function s(a,b){var d=f(b,"container"),e=h(b,"startTouchY");h(b,"previousTouchY");var g=h(b,"lastTouchY");if(h(b,"initialScrollPosition"),e){e!==g&&a.preventDefault();var j=c(b);g>e&&d.scrollTop()<j?o(b):p(b),i(b)}}function t(a,b){if("waiting"!==n(b)){var d=f(b,"container");h(b,"initialScrollPosition");var e=0;e="mousewheel"===a.type?a.originalEvent.screenY-(a.originalEvent.screenY+a.originalEvent.wheelDeltaY):a.originalEvent.screenY-(a.originalEvent.screenY+3*-1*a.originalEvent.detail),d.scrollTop()+e<c(b)&&(e*=.05),d.scrollTop(d.scrollTop()+e)}}function u(a,b){var d=b.data("options"),e=f(b,"container"),g=f(b,"contentWrapper"),h=f(b,"scrollThumb"),i=1;if(isNaN(d.bottomDetectionOffset)){if(-1!==d.bottomDetectionOffset.indexOf("%")){var j=parseInt(d.bottomDetectionOffset.substring(0,d.bottomDetectionOffset.indexOf("%")),10)/100;i=(e.scrollTop()+e.height())*j}}else i=d.bottomDetectionOffset;e.scrollTop()+e.height()+i>=e.get(0).scrollHeight&&b.trigger("bottomreached"),d.pull&&(e.scrollTop()<c(b)/2?m(b,"release"):m(b,"initial"));var k=c(b);if(e.scrollTop()>=k){var l=b.children().first(),n=b.children().last();l&&parseInt(l.css("marginTop"),10)>=0&&b.css("padding-top","1px"),n&&parseInt(n.css("marginBottom"),10)>=0&&b.css("padding-bottom","1px"),h.height(e.innerHeight()/g.outerHeight(!0)*(e.innerHeight()+k)-(h.outerHeight(!0)-h.outerHeight())),h.css("top",e.position().top+(e.scrollTop()-k)/g.outerHeight(!0)*e.innerHeight()),h.css("left",e.position().left+e.width()-h.outerWidth(!0))}else h.hide()}function v(a,b){var d=f(b,"container"),e=f(b,"scrollThumb");d.scrollTop()>c(b)&&(e.stop(!0,!0),e.fadeIn(500))}function w(a,c){var d=f(c,"scrollThumb");d.stop(!0,!0),d.delay(300).fadeOut(1e3);var e=h(c,"startTouchY");b()||e||o(c)}function x(a){return null!=a.data("scrollzInitialized")}var y={init:function(b){var c=a.extend({pull:!1,pullHeaderHTML:{initial:'<div><div class="icon"/><div class="label">Pull to refresh</div></div>',release:'<div><div class="icon"/><div class="label">Release to refresh</div></div>',waiting:'<div><div class="icon"/><div class="label">Refreshing...</div></div>'},inertia:!0,emulateTouchEvents:!1,bottomDetectionOffset:"10%"},b);if(void 0===a.easing.easeOutCubic&&(a.easing.easeOutCubic=function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c}),!a.event.special.scrollstart&&!a.event.special.scrollend){var e=a.event.special,h="D"+ +new Date,i="D"+(+new Date+1);e.scrollstart={setup:function(){var b,c=function(c){var d=this,f=arguments;b?clearTimeout(b):(c.type="scrollstart",a.event.dispatch.apply(d,f)),b=setTimeout(function(){b=null},e.scrollstop.latency)};a(this).bind("scroll",c).data(h,c)},teardown:function(){a(this).unbind("scroll",a(this).data(h))}},e.scrollstop={latency:300,setup:function(){var b,c=function(c){var d=this,f=arguments;b&&clearTimeout(b),b=setTimeout(function(){b=null,c.type="scrollstop",a.event.dispatch.apply(d,f)},e.scrollstop.latency)};a(this).bind("scroll",c).data(i,c)},teardown:function(){a(this).unbind("scroll",a(this).data(i))}}}return this.each(function(){var b=a(this);if(!x(b)){b.data("options",c),l(b);var e=f(b,"container");g(b,"initialScrollPosition",e.scrollTop()),e.bind(d(b,"touchstart"),function(a){q(a,b)}),e.bind(d(b,"touchmove"),function(a){a.preventDefault(),r(a,b)}),e.bind(d(b,"touchend"),function(a){s(a,b)}),a("*").not(e).bind(d(b,"touchend"),function(a){s(a,b)}),e.bind("mousewheel DOMMouseScroll",function(a){a.preventDefault(),t(a,b)}),e.scroll(function(a){u(a,b)}),e.bind("scrollstart",function(a){v(a,b)}),e.bind("scrollstop",function(a){w(a,b)}),b.data("scrollzInitialized",!0)}})},height:function(b){return this.each(function(){var c=a(this);if(x(c)){c.data("options");var d=f(c,"container");d.height(b),c.css("min-height",d.css("height"))}})},hidePullHeader:function(b,d){return b="undefined"!=typeof b?b:!0,d="undefined"!=typeof d?d:void 0,this.each(function(){var e=a(this);if(x(e)){var g=e.data("options"),h=f(e,"container");g.pull&&(b?h.animate({scrollTop:c(e)},"fast",function(){m(e,"initial"),"undefined"!=typeof d&&h.scrollTop(d)}):("undefined"!=typeof d?h.scrollTop(d):h.scrollTop(c(e)),m(e,"initial")))}})}};a.fn.scrollz=function(b){return y[b]?y[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist"),null):y.init.apply(this,arguments)},a.mobile&&(a(document).on("pagecreate",":jqmData(role='page')",function(){a(":jqmData(scrollz='simple')").scrollz(),a(":jqmData(scrollz='pull')").scrollz({pull:!0,emulateTouchEvents:!0})}),a(document).on("pageshow",":jqmData(role='page')",function(){a(window).resize()}),a(window).bind("orientationchange",function(b){"landscape"===b.orientation&&a.mobile.silentScroll(0)}),a(window).resize(function(){var b=0;a(".ui-page-active div.ui-header").each(function(){b+=a(this).outerHeight()});var c=0;a(".ui-page-active div.ui-footer").each(function(){c+=a(this).outerHeight()});var d=(window.innerHeight?window.innerHeight:a(window).height())-(b?b:0)-(c?c:0);a(":jqmData(scrollz='simple'), :jqmData(scrollz='pull')").scrollz("height",d)}))}(jQuery);